@if (dataSource?.data?.loading) {
  <div>
    <div class="loading-indicator">
      <!-- TODO: Add spinner or chart overlay with Material UI -->
      <p>Loading data, please wait...</p>
    </div>
  </div>
} @else if (dataSource?.data?.error) {
  <div>
    <div class="error">
      <p>Error: {{ dataSource.data.error }}</p>
    </div>
  </div>
} @else {
  <div class="earnings-table">
    <table mat-table [dataSource]="earningsData" class="mat-elevation-z8">
      <!-- Symbol Column -->
      <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef> Symbol </th>
        <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>

      <!-- Report Date Column -->
      <ng-container matColumnDef="reportDate">
        <th mat-header-cell *matHeaderCellDef> Report Date </th>
        <td mat-cell *matCellDef="let element"> {{element.reportDate | date}} </td>
      </ng-container>

      <!-- Fiscal Date Ending Column -->
      <ng-container matColumnDef="fiscalDateEnding">
        <th mat-header-cell *matHeaderCellDef> Fiscal Date Ending </th>
        <td mat-cell *matCellDef="let element"> {{element.fiscalDateEnding | date}} </td>
      </ng-container>

      <!-- Estimate Column -->
      <ng-container matColumnDef="estimate">
        <th mat-header-cell *matHeaderCellDef> Estimate </th>
        <td mat-cell *matCellDef="let element"> {{element.estimate}} </td>
      </ng-container>

      <!-- Currency Column -->
      <ng-container matColumnDef="currency">
        <th mat-header-cell *matHeaderCellDef> Currency </th>
        <td mat-cell *matCellDef="let element"> {{element.currency}} </td>
      </ng-container>

      <!-- Days From Now Column -->
      <ng-container matColumnDef="daysFromNow">
        <th mat-header-cell *matHeaderCellDef> Days From Now </th>
        <td mat-cell *matCellDef="let element" > {{element.daysFromNow}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
}
