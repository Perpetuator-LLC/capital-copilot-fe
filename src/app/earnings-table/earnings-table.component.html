@if (dataSource?.data?.loading) {
  <div>
    <div class="loading-indicator">
      <!-- TODO: Add spinner or chart overlay with Material UI -->
      <p>Loading data, please wait...</p>
    </div>
  </div>
} @else if (dataSource?.data?.error) {
  <div>
    <div class="error">
      <p>Error: {{ dataSource.data.error }}</p>
    </div>
  </div>
} @else {
  <div class="earnings-table">
    <mat-accordion>
      <mat-expansion-panel *ngFor="let element of earningsData">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <span matTooltip="Symbol">{{element.symbol}}</span>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <table mat-table [dataSource]="[element]" class="mat-elevation-z8">
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <td mat-cell *matCellDef="let element" matTooltip="Name"> {{element.name}} </td>
          </ng-container>

          <!-- Report Date Column -->
          <ng-container matColumnDef="reportDate">
            <td mat-cell *matCellDef="let element" matTooltip="Report Date"> {{element.reportDate | date}} </td>
          </ng-container>

          <!-- Fiscal Date Ending Column -->
          <ng-container matColumnDef="fiscalDateEnding">
            <td mat-cell *matCellDef="let element" matTooltip="Fiscal Date Ending"> {{element.fiscalDateEnding | date}} </td>
          </ng-container>

          <!-- Estimate Column -->
          <ng-container matColumnDef="estimate">
            <td mat-cell *matCellDef="let element" matTooltip="Estimate"> {{element.estimate}} </td>
          </ng-container>

          <!-- Currency Column -->
          <ng-container matColumnDef="currency">
            <td mat-cell *matCellDef="let element" matTooltip="Currency"> {{element.currency}} </td>
          </ng-container>

          <!-- Days From Now Column -->
          <ng-container matColumnDef="daysFromNow">
            <td mat-cell *matCellDef="let element" matTooltip="Days From Now"> {{element.daysFromNow}} </td>
          </ng-container>

          <tr mat-row *matRowDef="let row; columns: displayedColumns.slice(1);"></tr>
        </table>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
}
